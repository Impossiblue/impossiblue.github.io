<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Impossiblue: Audio visualizer - Star field</title><meta name="description" content="Audio visualization based on early experiments by Grant Skinner for the JavaScript library 'EaselJS'. Music by Derek Matthews Band. The song is 'Mrs. McGrath'."><meta name="author" content="https://impossiblue.github.io"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Impossiblue"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="apple-touch-icon" sizes="152x152" href="../../touch-icon-ipad.png"><link rel="apple-touch-startup-image" media="(device-width:768px) and (device-height:1024px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="../../start-up-1536x2008.png"><link rel="apple-touch-startup-image" media="(device-width:768px) and (device-height:1024px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="../../start-up-1496x2048.png"><link rel="stylesheet" href="../../css/i.css"><!--[if lt IE 10]><link rel="stylesheet" href="../../css/ie.css"><![endif]--><style>aside::after{content:"5 March, 2017";}h2+p{color:rgba(0,0,0,.24);}article div{position:relative;width:260px;height:560px;margin-top:1.5em;border:1px solid #eef5df;text-align:center;background-color:#000;overflow:hidden;}canvas{position:absolute;left:-350px;}@media only screen and (min-width:450px) and (max-width:589px){article div{width:400px;}canvas{left:-280px;}}@media only screen and (min-width:590px) and (max-width:729px){article div{width:540px;}canvas{left:-210px;}}@media only screen and (min-width:730px) and (max-width:869px){article div{width:680px;}canvas{left:-140px;}}@media only screen and (min-width:870px) and (max-width:997px){article div{width:820px;}canvas{left:-70px;}}@media only screen and (min-width:998px){article div{width:960px;}canvas{left:0;}}</style></head><body onload="init();"><div id="ie">With geriatric Internet Explorer versions this site looks shite. This because Impossiblue is built with modern tools and would require hacks and workarounds to function in legacy browsers. I no longer have the patience nor the inclination to satisfy everybody. Impossiblue is an experiment and a playground &#8211;&#160;and my sustenance does not depend on it. As a concequence &#8211;&#160;to embarrass nobody &#8211;&#160;I have decided to lock you out. So, there.</div><div id="wrapper"><aside>8</aside><header id="masthead"><h1><a href="../../index.html">Impossiblue</a></h1></header><nav><button class="goEast" title="Menu">Open menu<div></div></button><a id="at" class="goEast" href="../../form.html" title="Contact us">Open form</a><ul>

<!-- Navigation not updated -->

</ul></nav><article><h2>Audio visualizer &#8211;&#160;Star field</h2><p>First published on Ka of Isis 140329</p><div><canvas id="vslzr" width="960px" height="560px"><p class="nb">Your browser is too old for this&#8230;</p></canvas></div><audio id="dmb"><source src="dmb.mp3" type="audio/mpeg"><source src="dmb.ogg" type="audio/ogg"></audio><p class="drpcp">An audio visualization experiment based on an early version of Grant Skinner&#8217;s <a href="http://www.createjs.com/#!/EaselJS">EaselJS</a> JavaScript library. The effect created was originally, and appropriately, called <i>Star field</i>. If you ever tire of it (which is not possible), try and resist <a href="index.html">the <i>Atomic</i> variation</a>. The tune, by the way, is <i>Mrs. McGrath</i>, performed by the Derek Matthews Band; used with permission.</p><p><span class="nb">Bummer: </span>Although this still works in Safari in Yosemite, it no longer works for later browsers. I keep it in here anyway as I like to watch the animation from time to time.</p></article><footer class="cL cntr">Impossiblue &#169; Bj√∏rn Sortland</footer><noscript class="cntr">This site is shite without JavaScript</noscript></div><script src="https://code.jquery.com/jquery-2.2.4.min.js"></script><script>window.jQuery || document.write('<script src="../../js/jquery.min.js"><\/script>')</script><script src="easel.js"></script><script src="VolumeData.js"></script><script>var pseudo=true;$("nav button").click(function(){$("nav ul").toggle("fast");if(pseudo===true){$("nav button").addClass("noPseudo");pseudo=false;}else{$("nav button").removeClass("noPseudo");pseudo=true;}$("nav button div").toggle("fast");});
// Ever so slightly modified, localized and minified by Bjorn Sortland
// Note 'onload' in 'body' tag
var maxCircles=500,canvas,stage,audio,image,barL,barR,bg,star,star2,bmp,glow,pos,playing,volumeData,scanLineImage,frontSphere,backSphere,light,circles,frontCircles,backCircles,scanLines,fpsFld;function init(){canvas=document.getElementById("vslzr");stage=new Stage(canvas);stage.autoClear=false;audio=document.getElementById("dmb");var w=canvas.width,h=canvas.height;scanLineImage=new Image();scanLineImage.src="scanlines.png";loadMusic("dmb-2.jpg");var screen=new Shape();screen.graphics.beginFill("rgba(16,16,16,.2)").drawRect(0,0,w+1,h+1);star=new Shape();star.graphics.beginFill(Graphics.getRGB(128,40,255,.03)).drawPolyStar(0,0,h*.7,48,.95);star.graphics.beginFill(Graphics.getRGB(128,40,255,.16)).drawPolyStar(0,0,h*.75,6,.93);star.graphics.beginFill(Graphics.getRGB(128,40,255,.04)).drawPolyStar(0,0,h*.72,24,.93);star.compositeOperation="lighter";star2=star.clone();star2.alpha=.4;bg=new Container();bg.addChild(star,star2);fpsFld=new Text("","10px Arial","#FFF");fpsFld.alpha=.4;fpsFld.x=20;fpsFld.y=26;var r=40;backSphere=new Shape();backSphere.graphics.beginFill("#111").drawCircle(0,0,r);frontSphere=new Shape();frontSphere.graphics.beginRadialGradientFill(["rgba(0,0,0,0)","rgba(0,0,0,.6)"],[0,1],-r*.2,-r*.2,0,-r*.1,-r*.1,r);frontSphere.graphics.drawCircle(0,0,r);glow=new Shape();glow.graphics.beginRadialGradientFill(["rgba(230,180,255,.5)","rgba(10,30,255,0)"],[0,1],0,0,0,0,0,w/2).drawCircle(0,0,w/2);glow.graphics.beginFill("rgba(128,0,128,.1)").drawCircle(0,0,r*3);glow.graphics.beginFill("rgba(160,128,255,.1)").drawCircle(0,0,r*2);glow.compositeOperation="lighter";light=new Shape();light.graphics.beginFill("#95F").drawCircle(0,0,r);light.x=backSphere.x=glow.x=frontSphere.x=w/2;light.y=backSphere.y=glow.y=frontSphere.y=h/2;light.compositeOperation="lighter";scanLines=new Shape();bg.x=canvas.width/2;bg.y=canvas.height/2;bg.scaleX=canvas.width/canvas.height;backCircles=new Container();backCircles.x=w/2;backCircles.y=h/2;loadingFld=new Text("Loading audio...","21px Arial","#333");loadingFld.textAlign="center";loadingFld.textBaseline="middle";loadingFld.x=w/2;loadingFld.y=h/2;stage.addChild(screen,fpsFld,loadingFld);stage.update();Ticker.setFPS(20);}function addCircle(speed){var circle=new Shape();circle.compositeOperation="lighter";if(Math.random()<.1){circle.graphics.beginFill(Graphics.getRGB(20,10,90,Math.random()*.1+.1)).drawCircle(0,0,50);circle.graphics.beginFill(Graphics.getRGB(55,30,65,Math.random()*.2+.2)).drawPolyStar(0,0,20,6);}else{circle.graphics.beginFill(Graphics.getRGB(20,10,90,Math.random()*.1+.1)).drawCircle(0,0,2);circle.graphics.beginFill(Graphics.getRGB(55,30,65,.6)).drawPolyStar(0,0,1,6);speed*=1.2;}circle.z=2000;circle._x=0;circle._y=0;var a=Math.random()*Math.PI*2,d=Math.random()*35+5;circle.velX=Math.cos(a)*d;circle.velY=Math.sin(a)*d;circle.velZ=-(Math.random()*20+10)*(speed+.01)*4;circle.alpha=.5;backCircles.addChild(circle);}function loadMusic(dataImageURL){image=new Image();image.src=dataImageURL;playing=false;Ticker.addListener(window);}function tick(){fpsFld.text=Math.round(Ticker.getMeasuredFPS())+"fps";var h=canvas.height,w=canvas.width;if(!playing && image.complete && scanLineImage.complete && audio.readyState>=4){playing=true;volumeData=new VolumeData(image);volumeData.gain=1;audio.play();scanLines.graphics.beginBitmapFill(scanLineImage).drawRect(0,0,canvas.width+1,canvas.height+1);stage.removeChild(loadingFld);stage.addChild(bg,glow,backCircles,scanLines,fpsFld);stage.clear();}else{audio.play();}if(!playing){return;}var t=audio.currentTime,vol=volumeData.getVolume(t),avgVol=volumeData.getAverageVolume(t-.1,t),volDelta=volumeData.getVolume(t-.05);volDelta.left=vol.left-volDelta.left;volDelta.right=vol.right-volDelta.right;star.rotation+=avgVol.right*avgVol.left*4-.3;star2.rotation=-star.rotation;glow.alpha=vol.right;light.alpha=vol.right*vol.left;glow.scaleX=glow.scaleY=star.scaleX=star.scaleY=vol.right*1.1+.1;bg.alpha=vol.left*.5-.1;scanLines.alpha=1-vol.right*vol.left*.7;frontSphere.scaleX=frontSphere.scaleY=backSphere.scaleX=backSphere.scaleY=light.scaleX=light.scaleY=1+avgVol.right*avgVol.right*.6;var l=backCircles.getNumChildren(),c=.08;while(l<maxCircles && volDelta.right>c){addCircle(volDelta.right);c+=.002;l++;}var focalDistance=250;for(var i=l-1;i>=0;i--){var circle=backCircles.getChildAt(i);circle._x+=circle.velX;circle._y+=circle.velY;circle.z+=circle.velZ;var p=focalDistance/circle.z;circle.x=circle._x*p;circle.y=circle._y*p;circle.scaleX=circle.scaleY=(vol.left*vol.left*1.5+.4)*p*4;circle.alpha=(vol.left+vol.right+.5)*p;if (circle.y<-h/2 || circle.y>h/2 || circle.x<-w/2 || circle.x>w/2 || circle.z<10){circle.parent.removeChild(circle);}}stage.update();}</script></body></html>