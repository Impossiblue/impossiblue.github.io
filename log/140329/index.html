<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Impossiblue: Audio visualizer - Atomic</title><meta name="description" content="Audio visualization based on early experiments by Grant Skinner for the JavaScript library 'EaselJS'. Music by Derek Matthews Band. The song is 'Mrs. McGrath'."><meta name="author" content="https://impossiblue.github.io"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Impossiblue"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="apple-touch-icon" sizes="152x152" href="../../touch-icon-ipad.png"><link rel="apple-touch-startup-image" media="(device-width:768px) and (device-height:1024px) and (-webkit-device-pixel-ratio:2) and (orientation:portrait)" href="../../start-up-1536x2008.png"><link rel="apple-touch-startup-image" media="(device-width:768px) and (device-height:1024px) and (-webkit-device-pixel-ratio:2) and (orientation:landscape)" href="../../start-up-1496x2048.png"><link rel="stylesheet" href="../../css/i.css"><!--[if lt IE 10]><link rel="stylesheet" href="../../css/ie.css"><![endif]--><style>aside::after{content:"5 March, 2017";}h2+p{color:rgba(0,0,0,.24);}article div{position:relative;width:260px;height:560px;margin-top:1.5em;border:1px solid #eef5df;text-align:center;background-color:#000;overflow:hidden;}canvas{position:absolute;left:-350px;}@media only screen and (min-width:450px) and (max-width:589px){article div{width:400px;}canvas{left:-280px;}}@media only screen and (min-width:590px) and (max-width:729px){article div{width:540px;}canvas{left:-210px;}}@media only screen and (min-width:730px) and (max-width:869px){article div{width:680px;}canvas{left:-140px;}}@media only screen and (min-width:870px) and (max-width:997px){article div{width:820px;}canvas{left:-70px;}}@media only screen and (min-width:998px){article div{width:960px;}canvas{left:0;}}</style></head><body onload="init();"><div id="ie">With geriatric Internet Explorer versions this site looks shite. This because Impossiblue is built with modern tools and would require hacks and workarounds to function in legacy browsers. I no longer have the patience nor the inclination to satisfy everybody. Impossiblue is an experiment and a playground &#8211;&#160;and my sustenance does not depend on it. As a concequence &#8211;&#160;to embarrass nobody &#8211;&#160;I have decided to lock you out. So, there.</div><div id="wrapper"><aside>7</aside><header id="masthead"><h1><a href="../../index.html">Impossiblue</a></h1></header><nav><button class="goEast" title="Menu">Open menu<div></div></button><a id="at" class="goEast" href="../../form.html" title="Contact us">Open form</a><ul>
<li class="ctgr"><b>&#9662;&#8194;</b><strong>Lorem ipsums</strong></li>
<li><a href="../210310/index.html">The secret six</a></li>
<li><a href="../210305/index.html">CSS background &#8211; Part 1</a></li>
<li><a href="../210325/index.html">CSS background &#8211; Part 2</a></li>
<li><a href="../170505/index.html">A pure CSS modal window</a></li>
<li><a href="../170420-2/index.html"><code>box-shadow</code></a></li>
<li><a href="../170414/index.html">Putting the &#8220;Checkbox hack&#8221; to good use</a></li>
<li><a href="../170420/index.html">Greyscale</a></li>
<li><a href="../170404-2/index.html">Sepia</a></li>
<li><a href="../170404/index.html">Background gradients</a></li>
<li><a href="../170326/index.html">Pseudo-elements and the image tag</a></li>
<li><a href="../170308/index.html">Styling an HTML <code>input</code> element</a></li>
<li><a href="../150504/index.html">How to add and centre a custom iPad wallpaper</a></li>
<li><a href="../150421-2/index.html">How to make a screen dump on an iPad</a></li>
<li><a href="../150421/index.html">How to permanently delete pictures from an iPad</a></li>
<li><a href="../140502/index.html">PHP &#8211; Random image</a></li>
<li><a href="../140426/index.html">PHP &#8211; How to get the width and height of an image</a></li>
<li><a href="../140423/index.html">PHP &#8211; Random quote</a></li>
<li><a href="../140420/index.html">PHP &#8211; How to find pathnames matching a pattern</a></li>
<li><a href="../141026/index.html">How to design a close-button with CSS</a></li>
<li><a href="../140625/index.html">Film grain &#8211; Sort of</a></li>
<li><a href="../140528/index.html">Noisy canvas &#8211; Dynamic</a></li>
<li><a href="../140328/index.html">How to create a composite layer in Photoshop</a></li>
<li><a href="../140312/index.html">Noisy background &#8211; Static</a></li>
<li><a href="../100828/index.html">How to crop a movie with QuickTime Pro</a></li>
<li><a href="../060216/index.html">Gradient mosaic</a></li>
<li class="ctgr"><b>&#9662;&#8194;</b><strong>Rants and raves</strong></li>
<li><a href="../170417-2/index.html"><code>clip-path</code> &#8211; Part 2</a></li>
<li><a href="../170417/index.html"><code>clip-path</code> &#8211; Part 1</a></li>
<li><a href="../170322/index.html">Rapha&#235;l or Thinking outside the box</a></li>
<li><a href="../150907/index.html">Jan Kjærstad &#8211;&#160;Storyteller</a></li>
<li><a href="../150504-2/index.html">Rain on a window pane &#8211;&#160;JavaScript simulation</a></li>
<li><a href="../170315/index.html">CSS throbbers &#8211;&#160;Part 3</a></li>
<li><a href="../150503/index.html">CSS throbbers &#8211;&#160;Part 2</a></li>
<li><a href="../150407/index.html">CSS throbbers &#8211;&#160;Part 1</a></li>
<li><a href="../150406/index.html">ResEdit and the recreation of the Mac OS wristwatch cursor animation</a></li>
<li><a href="../141108/index.html">Kaja Norum</a></li>
<li><a href="../141010/index.html">Kurt &#38; Kara <i>c</i> 1984</a></li>
<li><a href="../140627/index.html">Canvas and the Close Pixelate script</a></li>
<li><a href="../140405/index.html">Web Audio API &#8211; 1st Approach</a></li>
<li id="crrnt"><b>&#9656;&#8194;</b>Audio visualizer &#8211; Atomic</li>
<li><a href="starfield.html">Audio visualizer &#8211; Star field</a></li>
<li><a href="../140323/index.html">Flash <i>in memoriam</i></a></li>
<li class="ctgr"><b>&#9662;&#8194;</b><strong>Notes to self</strong></li>
<li><a href="../150504-3/index.html">Ordnance Survey map of Great Britain</a></li>
<li><a href="../170530/index.html">Linking from SVG</a></li>
<li><a href="../170506/index.html">SVG in HTML and CSS</a></li>
<li><a href="../170429/index.html">Resize video <i>in situ</i></a></li>
<li><a href="../170425/index.html">Testing jQuery UI <code>draggable()</code></a></li>
<li><a href="../170424/index.html"><code>backdrop-filter: blur()</code></a></li>
<li><a href="../170422/index.html">Testing <code>sketch.js</code> &#8211;&#160;Particles</a></li>
<li><a href="../170404-3/index.html">Responsive images</a></li>
<li><a href="../170313/index.html">Pure CSS shapes</a></li>
<li><a href="../210308/index.html">A CSS TV-screen</a></li>
<li><a href="../170307/index.html">q</a></li>
<li><a href="../150511/index.html">xStand for iPad &#8211;&#160;The missing user manual</a></li>
<li><a href="../140628/index.html">CSS blur animation</a></li>
<li><a href="../150501/index.html">The CSS rule</a></li>
<li><a href="../170408/index.html">On forms and tables</a></li>
<li><a href="../140319/index.html">On animated cursors</a></li>
<li><a href="../150618/index.html">The concerts</a></li>
</ul></nav><article><h2>Audio visualizer &#8211;&#160;Atomic</h2><p>First published on Ka of Isis 140329</p><div><canvas id="vslzr" width="960px" height="560px"><p class="nb">Your browser is too old for this&#8230;</p></canvas></div><audio id="dmb"><source src="dmb.mp3" type="audio/mpeg"><source src="dmb.ogg" type="audio/ogg"></audio><p class="drpcp">An audio visualization experiment based on an early version of Grant Skinner&#8217;s <a href="http://www.createjs.com/#!/EaselJS">EaselJS</a> JavaScript library. The effect created was originally, and appropriately, called <i>Atomic</i>. If you ever tire of it (which is not possible), try and resist <a href="starfield.html">the <i>Star field</i> variation</a>. The tune, by the way, is <i>Mrs. McGrath</i>, performed by the Derek Matthews Band; used with permission.</p><p><span class="nb">Bummer: </span>This works neither on an iPad with iOS 7.0.4 nor in Android 4.1.2 on a Samsung tablet. Desktop has been tested OK with Safari and Chrome in Mac OS X and with Chrome in Windows XP. That&#8217;s life for you.</p></p></article><footer class="cL cntr">Impossiblue &#169; Bjørn Sortland</footer><noscript class="cntr">This site is shite without JavaScript</noscript></div><script src="https://code.jquery.com/jquery-2.2.4.min.js"></script><script>window.jQuery || document.write('<script src="../../js/jquery.min.js"><\/script>')</script><script src="easel.js"></script><script src="VolumeData.js"></script><script>var pseudo=true;$("nav button").click(function(){$("nav ul").toggle("fast");if(pseudo===true){$("nav button").addClass("noPseudo");pseudo=false;}else{$("nav button").removeClass("noPseudo");pseudo=true;}$("nav button div").toggle("fast");});
// Ever so slightly modified, localized and minified by Bjorn Sortland - Note 'onload' in 'body' tag
var maxCircles=150,canvas,stage,audio,image,barL,barR,bg,star,star2,bmp,glow,pos,playing,volumeData,scanLineImage,frontSphere,backSphere,light,circles,frontCircles,backCircles,scanLines,fpsFld,loadingFld;function init(){canvas=document.getElementById("vslzr");stage=new Stage(canvas);stage.autoClear=false;audio=document.getElementById("dmb");var w=canvas.width,h=canvas.height;scanLineImage=new Image();scanLineImage.src="scanlines.png";loadMusic("dmb.jpg");var screen=new Shape();screen.graphics.beginFill("rgba(16,16,16,.25)").drawRect(0,0,w+1,h+1);star=new Shape();star.graphics.beginFill(Graphics.getRGB(128,40,255,.03)).drawPolyStar(0,0,h*.7,48,.95);star.graphics.beginFill(Graphics.getRGB(128,40,255,.18)).drawPolyStar(0,0,h*.75,6,.93);star.graphics.beginFill(Graphics.getRGB(128,40,255,.05)).drawPolyStar(0,0,h*.72,24,.93);star.compositeOperation="lighter";star2=star.clone();star2.alpha=.4;bg=new Container();bg.addChild(star,star2);fpsFld=new Text("","10px Arial","#FFF");fpsFld.alpha=.4;fpsFld.x=20;fpsFld.y=26;var r=40;backSphere=new Shape();backSphere.graphics.beginFill("#111").drawCircle(0,0,r);frontSphere=new Shape();frontSphere.graphics.beginRadialGradientFill(["rgba(0,0,0,0)","rgba(0,0,0,.6)"],[0,1],-r*.2,-r*.2,0,-r*.1,-r*.1,r);frontSphere.graphics.drawCircle(0,0,r);glow=new Shape();glow.graphics.beginRadialGradientFill(["rgba(230,180,255,.5)","rgba(10,30,255,0)"],[0,1],0,0,0,0,0,w/2).drawCircle(0,0,w/2);glow.graphics.beginFill("rgba(128,0,128,.1)").drawCircle(0,0,r*3);glow.graphics.beginFill("rgba(160,128,255,.1)").drawCircle(0,0,r*2);glow.compositeOperation="lighter";light=new Shape();light.graphics.beginFill("#95F").drawCircle(0,0,r);light.x=backSphere.x=glow.x=frontSphere.x=w/2;light.y=backSphere.y=glow.y=frontSphere.y=h/2;light.compositeOperation="lighter";scanLines=new Shape();bg.x=canvas.width/2;bg.y=canvas.height/2;bg.scaleX=canvas.width/canvas.height;frontCircles=new Container();backCircles=new Container();frontCircles.x=backCircles.x=w/2;frontCircles.y=backCircles.y=h/2;loadingFld=new Text("Loading audio...","21px Arial","#333");loadingFld.textAlign="center";loadingFld.textBaseline="middle";loadingFld.x=w/2;loadingFld.y=h/2;stage.addChild(screen,fpsFld,loadingFld);stage.update();circles=[];Ticker.setFPS(20);}function addCircle(){var circle=new Shape();circle.compositeOperation="lighter";circle.graphics.beginFill(Graphics.getRGB(20,10,90,Math.random()*.1+.1)).drawCircle(0,0,50);circle.graphics.beginFill(Graphics.getRGB(55,30,65,Math.random()*.2+.2),100,Math.random()*5+90,1).drawPolyStar(0,0,20,6);var a=Math.random()*Math.PI*2,d=Math.random()*110+40;circle._x=Math.cos(a)*d;circle._y=Math.sin(a)*d;circle.z=Math.random()*50+100;a=Math.random()*Math.PI*2;d=Math.random()*15+10;circle.velX=Math.cos(a)*d;circle.velY=Math.sin(a)*d;circle.velZ=Math.random()*30-15;circle.alpha=.5;circles.push(circle);}function removeCircle(){if (circles.length==0){return;}var circle=circles.pop();if (circle.parent){circle.parent.removeChild(circle);}}function loadMusic(dataImageURL){image=new Image();image.src=dataImageURL;playing=false;Ticker.addListener(window);}function tick(){fpsFld.text=Math.round(Ticker.getMeasuredFPS())+"fps";if(!playing && image.complete && scanLineImage.complete && audio.readyState>=4){playing=true;volumeData=new VolumeData(image);volumeData.gain=1;audio.play();scanLines.graphics.beginBitmapFill(scanLineImage).drawRect(0,0,canvas.width+1,canvas.height+1);stage.removeChild(loadingFld);stage.addChild(bg,glow,backCircles,backSphere,light,frontSphere,frontCircles,scanLines,fpsFld);stage.clear();}else{audio.play();}if(!playing){return;}var t=audio.currentTime,vol=volumeData.getVolume(t),avgVol=volumeData.getAverageVolume(t-.1,t),volDelta=volumeData.getVolume(t-.05);volDelta.left=vol.left-volDelta.left;volDelta.right=vol.right-volDelta.right;star.rotation+=avgVol.right*avgVol.left*4-.3;star2.rotation=-star.rotation;glow.alpha=vol.right;light.alpha=avgVol.right*avgVol.left;glow.scaleX=glow.scaleY=star.scaleX=star.scaleY=vol.right*vol.right*.8+.5;bg.alpha=vol.left*.5-.1;scanLines.alpha=1-vol.right*vol.left*.7;frontSphere.alpha=Math.min(1,3-light.alpha*2.6);var s=avgVol.right*avgVol.right*.8+.3;frontCircles.scaleX=frontCircles.scaleY=backCircles.scaleX=backCircles.scaleY=Math.max(s,backCircles.scaleX+(s-backCircles.scaleX)*.1);frontSphere.scaleX=frontSphere.scaleY=backSphere.scaleX=backSphere.scaleY=light.scaleX=light.scaleY=1+avgVol.right*avgVol.right*.6;var l=circles.length,c=.3;while(l<maxCircles && volDelta.right+volDelta.left>c){addCircle();c+=.02;l++;}var max=(avgVol.right+avgVol.left)/2*maxCircles,focalDistance=350;for(var i=l-1;i>=0;i--){var circle=circles[i];circle.velX+=circle.x*-.005;circle.velY+=circle.y*-.005;circle.velZ+=circle.z*-.005;circle._x+=circle.velX;circle._y+=circle.velY;circle.z+=circle.velZ;var p=focalDistance/(circle.z+400);circle.x=circle._x*p;circle.y=circle._y*p;circle.scaleX=circle.scaleY=(vol.left*vol.left*1.1+.4)*p*2;circle.alpha=vol.left+vol.right+.4;if(circle.z>0){if(Math.sqrt(circle.x*circle.x+circle.y*circle.y)<60||(Math.random()<.15 && circle.z>=100) && l>max){if(circle.parent){circle.parent.removeChild(circle);}circles.splice(i,1);}else{backCircles.addChild(circle);}}else{frontCircles.addChild(circle);}}stage.update();}</script></body></html>